
<!doctype html>
<html lang="es-AR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title id="docTitle">Sitio</title>
  <meta id="metaDesc" name="description" content="" />
  <meta name="theme-color" content="#1a1a1a" />
  <style>
    :root{
      --headerH: 86px;
      --promoH: 44px;
      --bg:#0f0f0f;
      --text:#f2f2f2;
      --muted:#b8b8b8;
      --accent:#d7b07a;
      --ok:#42d37a;
      --bad:#ff6b6b;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --r:18px;
    }
    html{scroll-behavior:smooth;scroll-padding-top:calc(var(--headerH) + var(--promoH));}
    section{scroll-margin-top:calc(var(--headerH) + var(--promoH));}
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background: radial-gradient(1200px 700px at 20% -10%, rgba(215,176,122,.25), transparent 60%),
                  radial-gradient(900px 600px at 90% 10%, rgba(66,211,122,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.35;
    }
    a{color:inherit}
    .wrap{max-width:1100px;margin:0 auto;padding:22px}
    .promo{
      position: sticky; top: 0; z-index: 30;
      background: rgba(215,176,122,.14);
      border-bottom:1px solid rgba(215,176,122,.22);
      backdrop-filter: blur(10px);
      display:none;
    }
    .promo .wrap{
      padding: 10px 22px; display:flex; gap:12px; align-items:center; justify-content:space-between;
      min-height: var(--promoH);
    }
    .promoTxt{font-weight:800;color:#f0d2a5;letter-spacing:.01em;font-size:14px;}
    .promoTxt span{color:var(--text);font-weight:700}
    .topbar{
      position:sticky; top: var(--promoH); z-index:20;
      backdrop-filter: blur(10px);
      background: rgba(15,15,15,.65);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .topbar .wrap{display:flex;align-items:center;gap:14px}
    .brand{display:flex;align-items:center;gap:10px;min-width:220px}
    a.logo{
      width:48px;height:48px;border-radius:12px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      display:flex;align-items:center;justify-content:center;
      overflow:hidden;text-decoration:none;flex:0 0 auto;
    }
    .logo img{width:100%;height:100%;object-fit:cover;border-radius:12px;display:block}
    .logo .fallback{
      width:100%;height:100%;border-radius:12px;display:none;align-items:center;justify-content:center;
      font-weight:900;letter-spacing:.04em;color: var(--text);background: rgba(255,255,255,.06);
    }
    .logo.is-fallback img{display:none}
    .logo.is-fallback .fallback{display:flex}
    nav{margin-left:auto;display:flex;gap:14px;flex-wrap:wrap}
    nav a{
      text-decoration:none;color:var(--muted);font-size:14px;padding:8px 10px;border-radius:12px;transition:.2s ease;
    }
    nav a:hover{color:var(--text);background:rgba(255,255,255,.06)}
    .cta{display:flex;gap:10px;align-items:center;margin-left:6px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      gap:10px;padding:10px 14px;border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      text-decoration:none;font-weight:650;font-size:14px;
      transition:.2s ease;white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18);background:rgba(255,255,255,.09)}
    .btn.primary{
      background: linear-gradient(135deg, rgba(66,211,122,.95), rgba(66,211,122,.25));
      color:#0b1510;border-color: rgba(66,211,122,.35);
    }
    .hero{padding:34px 0 10px}
    .grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:18px;align-items:stretch;}
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
      .brand{min-width:auto}
      nav{display:none}
    }
    .card{
      background: rgba(22,22,22,.78);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding:18px;
    }
    h1{margin:0 0 10px;font-size:42px;letter-spacing:-.02em}
    @media (max-width: 520px){ h1{font-size:34px} }
    .sub{color:var(--muted);font-size:16px;margin:0 0 16px}
    .pillrow{display:flex;gap:10px;flex-wrap:wrap;margin:14px 0 0}
    .pill{border:1px solid rgba(255,255,255,.10);background: rgba(255,255,255,.05);color:var(--text);padding:8px 10px;border-radius:999px;font-size:13px;}
    .pill .dot{display:inline-block;width:8px;height:8px;border-radius:99px;background:var(--accent);margin-right:8px;vertical-align:middle}
    .pill.ok .dot{background:var(--ok)}
    section{padding:14px 0}
    h2{margin:0 0 10px;font-size:24px}
    .muted{color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .hr{height:1px;background:rgba(255,255,255,.08);margin:12px 0}
    .cols{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width: 520px){ .cols{grid-template-columns:1fr} }
    .kv{border:1px solid rgba(255,255,255,.08);background: rgba(255,255,255,.04);border-radius: 16px;padding:12px;}
    .kv .k{color:var(--muted);font-size:12px;margin-bottom:6px}
    .kv .v{font-size:15px;font-weight:650}
    .kv a{color:var(--text);text-decoration:none}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;background: rgba(215,176,122,.12);border:1px solid rgba(215,176,122,.25);color:#f0d2a5;font-weight:700;font-size:13px;}
    .status{display:flex;align-items:center;gap:10px;border:1px solid rgba(255,255,255,.08);background: rgba(255,255,255,.04);border-radius: 16px;padding:12px;margin-top:12px;}
    .status .dot{width:10px;height:10px;border-radius:999px;background:var(--ok);box-shadow: 0 0 0 4px rgba(66,211,122,.12);flex:0 0 auto;}
    .status.closed .dot{background:var(--bad);box-shadow: 0 0 0 4px rgba(255,107,107,.12);}
    .status .txt{font-weight:800}
    .status .subtxt{color:var(--muted);font-size:13px;margin-top:2px}
    .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;}
    @media (max-width: 520px){ .gallery{grid-template-columns:1fr} }
    .gallery img{width:100%;height:180px;object-fit:cover;border-radius:16px;border:1px solid rgba(255,255,255,.08);background: rgba(255,255,255,.04);cursor: zoom-in;}
    #lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;cursor:zoom-out;padding: 18px;}
    #lightbox img{max-width:92vw;max-height:92vh;border-radius:16px;box-shadow: 0 20px 60px rgba(0,0,0,.6);}
    .menuGrid{display:grid;grid-template-columns: 1fr 1fr 1fr;gap:12px;margin-top: 8px;}
    @media (max-width: 900px){ .menuGrid{grid-template-columns:1fr} }
    .menuBox{border:1px solid rgba(255,255,255,.08);background: rgba(255,255,255,.04);border-radius: 16px;padding:14px;}
    .menuBox h3{margin:0 0 10px;font-size:16px}
    .menuItem{display:flex;justify-content:space-between;gap:12px;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.06);}
    .menuItem:last-child{border-bottom:none}
    .menuItem .name{font-weight:700}
    .menuItem .desc{color:var(--muted);font-size:12px;margin-top:3px}
    .menuItem .price{font-weight:900;white-space:nowrap}
    .steps{display:grid;grid-template-columns: repeat(3, 1fr);gap:12px;margin-top:10px;}
    @media (max-width: 900px){ .steps{grid-template-columns:1fr} }
    .step{border:1px solid rgba(255,255,255,.08);background: rgba(255,255,255,.04);border-radius: 16px;padding:14px;}
    .stepNum{width:34px;height:34px;border-radius:12px;display:grid;place-items:center;background: rgba(215,176,122,.14);border:1px solid rgba(215,176,122,.22);color:#f0d2a5;font-weight:900;margin-bottom:10px;}
    .step h3{margin:0 0 6px;font-size:16px}
    .step p{margin:0;color:var(--muted);font-size:13px}
    .mapframe{width:100%;height:340px;border:0;border-radius:16px;background:#101010;}
    .floatbar{position: fixed;left:0;right:0;bottom:0;padding: 12px 14px calc(12px + env(safe-area-inset-bottom));display:none;gap: 10px;z-index: 9998;background: rgba(15,15,15,.72);border-top:1px solid rgba(255,255,255,.06);backdrop-filter: blur(10px);}
    .floatbar a{flex:1;text-align:center;justify-content:center;padding: 12px 14px;border-radius: 16px;}
    @media (max-width: 900px){ .floatbar{display:flex;} body{ padding-bottom: 88px; } }
    footer{padding:24px 0 40px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="promo" id="promo">
    <div class="wrap">
      <div class="promoTxt" id="promoText">‚≠ê Promo: <span>‚Äî</span></div>
      <a class="btn primary" id="promoCta" href="#" target="_blank" rel="noopener">Pedir por WhatsApp</a>
    </div>
  </div>

  <header class="topbar" style="--promoH: 44px">
    <div class="wrap">
      <div class="brand">
        <a class="logo" href="#" aria-label="Ir al inicio">
          <img id="brandLogo" src="logo.jpg" alt="Logo" onerror="this.closest('.logo').classList.add('is-fallback')" />
          <span class="fallback" id="brandFallback">LOGO</span>
        </a>
        <div>
          <div id="brandName" style="font-weight:900;letter-spacing:.02em">‚Äî</div>
          <div id="brandTagline" class="small">‚Äî</div>
        </div>
      </div>

      <nav>
        <a href="#info">Info</a>
        <a href="#horarios">Horarios</a>
        <a href="#como-pedir">C√≥mo pedir</a>
        <a href="#faq">FAQ</a>
        <a href="#menu">Carta</a>
        <a href="#ubicacion">Ubicaci√≥n</a>
      </nav>

      <div class="cta">
        <a class="btn" id="instagramBtn" href="#" target="_blank" rel="noopener">Instagram</a>
        <a class="btn primary" id="whatsBtn" href="#" target="_blank" rel="noopener">WhatsApp</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="grid">
        <div class="card">
          <div class="badge" id="badgeTop">‚Äî</div>
          <h1 id="heroTitle">‚Äî</h1>
          <p class="sub" id="heroSubtitle">‚Äî</p>

          <div class="pillrow" id="pillRow"></div>

          <div id="statusBox" class="status" aria-live="polite">
            <span class="dot"></span>
            <div>
              <div id="statusText" class="txt">Cargando estado...</div>
              <div id="statusSub" class="subtxt">‚Äî</div>
            </div>
          </div>

          <div class="status" aria-label="Destacado del d√≠a">
            <span class="dot"></span>
            <div>
              <div id="featuredTitle" class="txt">‚≠ê Destacado del d√≠a</div>
              <div id="featuredText" class="subtxt">‚Äî</div>
            </div>
          </div>

          <div class="hr"></div>

          <div id="info">
            <h2>Info</h2>
            <div class="cols">
              <div class="kv">
                <div class="k">Direcci√≥n</div>
                <div class="v" id="addressLine">‚Äî</div>
                <div class="small"><a id="mapsLink" target="_blank" rel="noopener" href="#">Ver en Google Maps ‚Üí</a></div>
              </div>

              <div class="kv">
                <div class="k">Contacto</div>
                <div class="v"><a id="telLink" href="#">‚Äî</a></div>
                <div class="small"><a id="waLink" target="_blank" rel="noopener" href="#">Escribir por WhatsApp ‚Üí</a></div>
              </div>

              <div class="kv">
                <div class="k">Medios de pago</div>
                <div class="v" id="paymentsLine">‚Äî</div>
              </div>

              <div class="kv">
                <div class="k">Precio estimado</div>
                <div class="v" id="priceRangeLine">‚Äî</div>
              </div>
            </div>
          </div>

          <div class="hr"></div>

          <div id="horarios">
            <h2>Horarios</h2>
            <div class="cols" id="hoursCols"></div>
          </div>

          <div class="hr"></div>

          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn primary" id="ctaReserve" href="#" target="_blank" rel="noopener">Reservas / Consultas</a>
            <a class="btn" id="ctaInstagram" href="#" target="_blank" rel="noopener">Ver novedades</a>
            <a class="btn" href="#ubicacion">C√≥mo llegar</a>
            <a class="btn" href="indexMenu.html">Hacer pedido</a>
          </div>
        </div>

        <div class="card">
          <h2>Galer√≠a</h2>
          <div id="gallery" class="gallery"></div>
          <p class="small" id="galleryNote"></p>
        </div>
      </div>
    </section>

    <section id="como-pedir">
      <div class="card">
        <h2 id="howTitle">C√≥mo pedir</h2>
        <p class="muted" id="howSub" style="margin-top:0"></p>
        <div class="steps" id="howSteps"></div>
        <div class="hr"></div>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn primary" id="howCta" href="#" target="_blank" rel="noopener">Pedir por WhatsApp</a>
          <a class="btn" href="#menu">Ver carta</a>
        </div>
      </div>
    </section>

    <section id="faq">
      <div class="card">
        <h2 id="faqTitle">Preguntas frecuentes</h2>
        <div class="steps" id="faqItems"></div>
      </div>
    </section>

    <section id="menu">
      <div class="card">
        <h2>Carta</h2>
        <p class="muted" id="menuNote" style="margin-top:0"></p>
        <div id="menuGrid" class="menuGrid"></div>
      </div>
    </section>

    <section id="ubicacion">
      <div class="card">
        <h2>Ubicaci√≥n</h2>
        <p class="muted" id="addressLine2" style="margin-top:0"></p>

        <iframe class="mapframe" id="mapEmbed" loading="lazy" referrerpolicy="no-referrer-when-downgrade" src=""></iframe>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
          <a class="btn" id="mapsLink2" target="_blank" rel="noopener" href="#">Abrir en Google Maps</a>
          <a class="btn primary" id="ctaMenuWa" target="_blank" rel="noopener" href="#">Pedir carta por WhatsApp</a>
        </div>
      </div>
    </section>

    <footer>
      <div class="hr"></div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between">
        <div>¬© <span id="y"></span> <span id="footName">‚Äî</span></div>
        <div class="small" id="footExtra">‚Äî</div>
      </div>
    </footer>
  </main>

  <div class="floatbar">
    <a class="btn primary" id="floatWa" target="_blank" rel="noopener" href="#">WhatsApp</a>
    <a class="btn" id="floatMaps" target="_blank" rel="noopener" href="#">C√≥mo llegar</a>
  </div>

  <div id="lightbox"><img id="lightbox-img" alt="Imagen ampliada" /></div>

<script>
  const YEAR = new Date().getFullYear();
  document.getElementById("y").textContent = YEAR;

  function hmToMin(hm){
    const [h,m] = String(hm).split(":").map(Number);
    return (h*60) + m;
  }
  function getBuenosAiresNow(){
    const parts = new Intl.DateTimeFormat("es-AR", {
      timeZone: "America/Argentina/Buenos_Aires",
      weekday: "short",
      hour: "2-digit",
      minute: "2-digit",
      hour12: false
    }).formatToParts(new Date());
    let weekday = "", hour = "00", minute = "00";
    for(const p of parts){
      if(p.type === "weekday") weekday = p.value.toLowerCase();
      if(p.type === "hour") hour = p.value;
      if(p.type === "minute") minute = p.value;
    }
    return { weekday, minutes: (parseInt(hour,10)*60 + parseInt(minute,10)) };
  }
  function weekdayToIndex(w){
    if(w.startsWith("lun")) return 1;
    if(w.startsWith("mar")) return 2;
    if(w.startsWith("mi"))  return 3;
    if(w.startsWith("jue")) return 4;
    if(w.startsWith("vie")) return 5;
    if(w.startsWith("s√°") || w.startsWith("sa")) return 6;
    return 0;
  }
  function computeOpenStatus(schedule, summaryText){
    const now = getBuenosAiresNow();
    const day = weekdayToIndex(now.weekday);
    const spans = (schedule && schedule[String(day)]) ? schedule[String(day)] : [];
    const nowMin = now.minutes;

    for(const span of spans){
      const o = span[0], c = span[1];
      const oMin = hmToMin(o), cMin = hmToMin(c);
      if(nowMin >= oMin && nowMin < cMin){
        return { open: true, msg: "Abierto ahora", sub: summaryText || "" };
      }
    }
    return { open: false, msg: "Cerrado ahora", sub: summaryText || "" };
  }

  function el(id){ return document.getElementById(id); }

  async function loadSite(){
    const res = await fetch("/site.json", { cache: "no-store" });
    if(!res.ok) throw new Error("site.json not found");
    return await res.json();
  }
  async function loadProducts(){
    const res = await fetch("/products.json", { cache: "no-store" });
    if(!res.ok) throw new Error("products.json not found");
    return await res.json();
  }
  async function loadGalleryList(){
    try{
      const res = await fetch("img/images.json", { cache: "no-store" });
      if(!res.ok) return [];
      const arr = await res.json();
      return Array.isArray(arr) ? arr : [];
    }catch{
      return [];
    }
  }

  function setWhatsLinks(site){
    const num = site?.contact?.whatsappNumber || "";
    const defText = site?.contact?.whatsappDefaultText || "";
    const wa = (text) => "https://wa.me/" + num + "?text=" + encodeURIComponent(text || defText);

    el("whatsBtn").href = wa(defText);
    el("waLink").href = wa(defText);
    el("ctaReserve").href = wa(defText);
    el("howCta").href = wa(site?.howToOrder?.ctaText ? (site.howToOrder.ctaText + " üòä") : defText);
    el("ctaMenuWa").href = wa("Hola " + (site.businessName||"") + ", ¬øme pas√°s la carta o opciones del d√≠a?");
    el("floatWa").href = wa(defText);
  }

  function applySite(site){
    const name = site?.businessName || "Mi negocio";
    const tagline = site?.tagline || "";

    el("brandName").textContent = name.toUpperCase();
    el("brandTagline").textContent = tagline;
    el("footName").textContent = name;

    el("heroTitle").textContent = site?.heroTitle || name;
    el("heroSubtitle").innerHTML = (site?.heroSubtitle || "").replaceAll("\n","<br>");

    el("badgeTop").textContent = (site?.badges && site.badges[0]) ? site.badges[0] : "‚Äî";

    // Pills
    const pillRow = el("pillRow");
    pillRow.innerHTML = "";
    (site?.pills || []).forEach(p=>{
      const div = document.createElement("div");
      div.className = "pill" + (p.ok ? " ok" : "");
      div.innerHTML = `<span class="dot"></span>${p.label || ""}`;
      pillRow.appendChild(div);
    });

    // Promo
    const promo = site?.promo;
    if(promo && promo.enabled){
      el("promo").style.display = "block";
      el("promoText").innerHTML = `${promo.label || "‚≠ê Promo:"} <span>${promo.text || ""}</span>`;
      el("promoCta").textContent = promo.ctaText || "Pedir por WhatsApp";
      el("promoCta").href = promo.ctaLink || "#";
    }else{
      el("promo").style.display = "none";
    }

    // Contact/social
    el("instagramBtn").href = site?.contact?.instagramUrl || "#";
    el("ctaInstagram").href = site?.contact?.instagramUrl || "#";

    const phoneDisp = site?.contact?.phoneDisplay || "";
    el("telLink").textContent = phoneDisp || "‚Äî";
    el("telLink").href = phoneDisp ? ("tel:+" + phoneDisp.replace(/[^0-9]/g,"")) : "#";

    // Location
    el("addressLine").textContent = site?.location?.addressLine || "‚Äî";
    el("addressLine2").textContent = site?.location?.addressLine || "‚Äî";
    el("mapsLink").href = site?.location?.mapsLinkUrl || "#";
    el("mapsLink2").href = site?.location?.mapsLinkUrl || "#";
    el("floatMaps").href = site?.location?.mapsLinkUrl || "#";
    el("mapEmbed").src = site?.location?.mapsEmbedUrl || "";

    // Payments / price
    el("paymentsLine").textContent = site?.paymentsLine || "‚Äî";
    el("priceRangeLine").textContent = site?.priceRangeLine || "‚Äî";

    // Hours
    const hoursCols = el("hoursCols");
    hoursCols.innerHTML = "";
    (site?.hours?.lines || []).forEach(h=>{
      const box = document.createElement("div");
      box.className = "kv";
      box.innerHTML = `<div class="k">${h.label || ""}</div><div class="v">${h.value || ""}</div>`;
      hoursCols.appendChild(box);
    });

    // Status open/closed
    el("statusSub").textContent = site?.hours?.summary || "";
    const st = computeOpenStatus(site?.hours?.schedule || {}, site?.hours?.summary || "");
    el("statusText").textContent = st.msg;
    el("statusBox").classList.toggle("closed", !st.open);

    // Featured
    el("featuredTitle").textContent = site?.featured?.title || "‚≠ê Destacado del d√≠a";
    el("featuredText").textContent = site?.featured?.text || "";

    // How to order
    el("howTitle").textContent = site?.howToOrder?.title || "C√≥mo pedir";
    el("howSub").textContent = site?.howToOrder?.subtitle || "";
    const steps = el("howSteps"); steps.innerHTML = "";
    (site?.howToOrder?.steps || []).forEach((s,i)=>{
      const div = document.createElement("div");
      div.className = "step";
      div.innerHTML = `<div class="stepNum">${i+1}</div><h3>${s.title||""}</h3><p>${s.text||""}</p>`;
      steps.appendChild(div);
    });

    // FAQ
    el("faqTitle").textContent = site?.faq?.title || "Preguntas frecuentes";
    const faq = el("faqItems"); faq.innerHTML = "";
    (site?.faq?.items || []).forEach(it=>{
      const div = document.createElement("div");
      div.className = "step";
      div.innerHTML = `<h3>${it.q||""}</h3><p>${it.a||""}</p>`;
      faq.appendChild(div);
    });

    // Menu note / footer extra
    el("menuNote").textContent = site?.menu?.note || "";
    el("footExtra").textContent = (site?.footer?.extra || "");
    el("galleryNote").textContent = site?.gallery?.note || "";
  }

  function applyProducts(products){
    const grid = el("menuGrid");
    grid.innerHTML = "";
    const cats = Array.isArray(products?.categories) ? products.categories : [];
    cats.forEach(cat=>{
      const box = document.createElement("div");
      box.className = "menuBox";
      box.innerHTML = `<h3>${cat.category || ""}</h3>`;
      const items = Array.isArray(cat.items) ? cat.items : [];
      items.forEach(it=>{
        const name = it.name || "";
        const desc = it.description || "";
        const priceLabel = it.price || "";
        const row = document.createElement("div");
        row.className = "menuItem";
        row.innerHTML = `<div><div class="name">${name}</div><div class="desc">${desc}</div></div><div class="price">${priceLabel}</div>`;
        box.appendChild(row);
      });
      grid.appendChild(box);
    });
  }

  function setupGallery(files){
    const g = el("gallery");
    g.innerHTML = "";
    files.forEach(fn=>{
      const img = document.createElement("img");
      img.src = "img/" + fn;
      img.alt = "Foto";
      img.addEventListener("click", ()=>{
        el("lightbox-img").src = img.src;
        el("lightbox").style.display = "flex";
      });
      g.appendChild(img);
    });
    el("lightbox").addEventListener("click", ()=>{
      el("lightbox").style.display = "none";
      el("lightbox-img").src = "";
    });
  }

  async function main(){
    try{
      const [site, products, gallery] = await Promise.all([loadSite(), loadProducts(), loadGalleryList()]);

      document.title = `${site.businessName || "Sitio"} | ${site.tagline || ""}`.trim();
      el("metaDesc").setAttribute("content", site.heroSubtitle || "");

      applySite(site);
      setWhatsLinks(site);
      applyProducts(products);
      setupGallery(gallery);
    }catch(e){
      console.warn(e);
      el("statusText").textContent = "No se pudo cargar el sitio";
      el("statusBox").classList.add("closed");
    }
  }
  main();
</script>
</body>
</html>
